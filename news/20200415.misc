Configuration assembly - typing fixes, explicit mutation, use TypedDict